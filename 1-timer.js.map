{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["// імпортуємо бібліотеку flatpickr \nimport flatpickr from \"flatpickr\";\n// Додатковий імпорт стилів\nimport \"flatpickr/dist/flatpickr.min.css\";\n\n// імпортуємо бібліотеку izitoast\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nlet userSelectedDate;     //дата, введена користувачем\n\n//елементи документу\nconst dateInput = document.querySelector(\"#datetime-picker\");\nconst startTimerBtn = document.querySelector(\".btn-timer\");\nconst timerDaysElm = document.querySelector(\"[data-days]\");\nconst timerHoursElm = document.querySelector(\"[data-hours]\");\nconst timerMinutesElm = document.querySelector(\"[data-minutes]\");\nconst timerSecondsElm = document.querySelector(\"[data-seconds]\");\n\n// об'єкт параметрів для flatpickr\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    let dateNow = new Date();\n    if (selectedDates[0] - dateNow >= 0) {\n      userSelectedDate = selectedDates[0];\n      startTimerBtn.disabled = false;\n      startTimerBtn.addEventListener('click', startTimerBtnOnClick);\n    } else {    \n\n      iziToast.error({\n        title: 'Error!',\n        message: 'Please choose a date in the future',\n        titleColor:'rgb(113, 8, 8)',\n        backgroundColor:'rgb(234, 203, 218)',\n        messageColor:'rgb(211, 23, 23)',\n        position: 'topRight',\n     });\n      startTimerBtn.disabled = true;  \n      startTimerBtn.removeEventListener('click', startTimerBtnOnClick);\n    }\n  }\n};\n\n//ініціалізація flatpickr\nconst fpDate = flatpickr(dateInput, options);\n\n//запуск таймера\nfunction startTimerBtnOnClick() {\n  startTimerBtn.disabled = true;\n  dateInput.disabled = true;\n\n  const intervalID = setInterval(() => {\n    const dateCurrent = new Date();\n    const diffMs = userSelectedDate - dateCurrent;\n    showTimer(diffMs);\n\n    if (diffMs < 1000) {\n      clearInterval(intervalID);\n      dateInput.disabled = false;\n    }\n\n  }, 1000);\n\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction showTimer(ms) {\n  const { days, hours, minutes, seconds } = convertMs(ms);\n  timerDaysElm.textContent = days.toString().padStart(2,0);\n  timerHoursElm.textContent = hours.toString().padStart(2,0);\n  timerMinutesElm.textContent = minutes.toString().padStart(2,0);\n  timerSecondsElm.textContent = seconds.toString().padStart(2, 0);\n}"],"names":["userSelectedDate","dateInput","startTimerBtn","timerDaysElm","timerHoursElm","timerMinutesElm","timerSecondsElm","options","selectedDates","dateNow","startTimerBtnOnClick","iziToast","flatpickr","intervalID","diffMs","showTimer","convertMs","ms","days","hours","minutes","seconds"],"mappings":"0IAWA,IAAIA,EAGJ,MAAMC,EAAY,SAAS,cAAc,kBAAkB,EACrDC,EAAgB,SAAS,cAAc,YAAY,EACnDC,EAAe,SAAS,cAAc,aAAa,EACnDC,EAAgB,SAAS,cAAc,cAAc,EACrDC,EAAkB,SAAS,cAAc,gBAAgB,EACzDC,EAAkB,SAAS,cAAc,gBAAgB,EAGzDC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,IAAIC,EAAU,IAAI,KACdD,EAAc,CAAC,EAAIC,GAAW,GAChCT,EAAmBQ,EAAc,CAAC,EAClCN,EAAc,SAAW,GACzBA,EAAc,iBAAiB,QAASQ,CAAoB,IAG5DC,EAAS,MAAM,CACb,MAAO,SACP,QAAS,qCACT,WAAW,iBACX,gBAAgB,qBAChB,aAAa,mBACb,SAAU,UAClB,CAAM,EACAT,EAAc,SAAW,GACzBA,EAAc,oBAAoB,QAASQ,CAAoB,EAElE,CACH,EAGeE,EAAUX,EAAWM,CAAO,EAG3C,SAASG,GAAuB,CAC9BR,EAAc,SAAW,GACzBD,EAAU,SAAW,GAErB,MAAMY,EAAa,YAAY,IAAM,CAEnC,MAAMC,EAASd,EADK,IAAI,KAExBe,EAAUD,CAAM,EAEZA,EAAS,MACX,cAAcD,CAAU,EACxBZ,EAAU,SAAW,GAGxB,EAAE,GAAI,CAET,CAEA,SAASe,EAAUC,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASN,EAAUE,EAAI,CACrB,KAAM,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYL,EAAUC,CAAE,EACtDd,EAAa,YAAce,EAAK,SAAU,EAAC,SAAS,EAAE,CAAC,EACvDd,EAAc,YAAce,EAAM,SAAU,EAAC,SAAS,EAAE,CAAC,EACzDd,EAAgB,YAAce,EAAQ,SAAU,EAAC,SAAS,EAAE,CAAC,EAC7Dd,EAAgB,YAAce,EAAQ,SAAU,EAAC,SAAS,EAAG,CAAC,CAChE"}